(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a8624dc"],{"297d":function(e,t,o){},"2cfb":function(e,t,o){"use strict";var n=o("5d9f"),i=o.n(n);i.a},"50d3":function(e,t,o){"use strict";var n=o("acb5"),i=o.n(n);i.a},5553:function(e,t,o){"use strict";var n=o("5657"),i=o.n(n);i.a},5657:function(e,t,o){},"5d9f":function(e,t,o){},6929:function(e,t,o){},"75a0":function(e,t,o){},"8079e":function(e,t,o){"use strict";var n=o("75a0"),i=o.n(n);i.a},"839b":function(e,t,o){"use strict";var n=o("297d"),i=o.n(n);i.a},8593:function(e,t,o){"use strict";o.d(t,"p",(function(){return i})),o.d(t,"i",(function(){return a})),o.d(t,"v",(function(){return r})),o.d(t,"B",(function(){return l})),o.d(t,"z",(function(){return s})),o.d(t,"h",(function(){return c})),o.d(t,"u",(function(){return u})),o.d(t,"o",(function(){return d})),o.d(t,"j",(function(){return f})),o.d(t,"w",(function(){return h})),o.d(t,"q",(function(){return p})),o.d(t,"l",(function(){return m})),o.d(t,"r",(function(){return b})),o.d(t,"x",(function(){return g})),o.d(t,"y",(function(){return v})),o.d(t,"A",(function(){return D})),o.d(t,"D",(function(){return R})),o.d(t,"C",(function(){return G})),o.d(t,"k",(function(){return C})),o.d(t,"m",(function(){return I})),o.d(t,"f",(function(){return k})),o.d(t,"s",(function(){return _})),o.d(t,"g",(function(){return N})),o.d(t,"t",(function(){return O})),o.d(t,"n",(function(){return A})),o.d(t,"c",(function(){return M})),o.d(t,"b",(function(){return U})),o.d(t,"d",(function(){return y})),o.d(t,"a",(function(){return j})),o.d(t,"e",(function(){return w}));var n=o("b775");function i(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=DeleteMenu",method:"post",data:e})}function a(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddMenu",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=UpdateMenu",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=GetOrganizeList",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=GetDepartmentList",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddDepartment",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=UpdateDepartment",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=DeleteDepartment",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddRole",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=UpdateRole",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=DeleteRole",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddUser",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=DeleteUser",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=UpdateUser",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=GetCodeTypeList",method:"post",data:e})}function D(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=GetMenuList",method:"post",data:e})}function R(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=GetUserALL",method:"post",data:e})}function G(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=GetRoleUser",method:"post",data:e})}function C(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddRoleUser",method:"post",data:e})}function I(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=DeleteCode",method:"post",data:e})}function k(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddCode",method:"post",data:e})}function _(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=UpdateCode",method:"post",data:e})}function N(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddCodeType",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=UpdateCodeType",method:"post",data:e})}function A(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=DeleteCodeType",method:"post",data:e})}function M(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddUserRole",method:"post",data:e})}function U(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddRoleMenu",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=DeleteOrganize",method:"post",data:e})}function j(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=AddOrganize",method:"post",data:e})}function w(e){return Object(n["a"])({url:"/api/service/GetMethod?GNID=UpdateOrganize",method:"post",data:e})}},"90f4":function(e,t,o){"use strict";var n=o("f9e2"),i=o.n(n);i.a},acb5:function(e,t,o){},b3ec:function(e,t,o){"use strict";var n=o("6929"),i=o.n(n);i.a},e135:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-card",[o("div",{staticClass:"filter-container"},[o("el-form",{attrs:{inline:!0}},[o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1)],1),e._v(" "),o("el-table",{ref:"table",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{stripe:"",height:e.tableHeight,data:e.tableData,"highlight-current-row":""}},[o("el-table-column",{attrs:{prop:"RoleName",label:"角色名称",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"RoleCode",label:"角色编码",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"Description",label:"描述",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"RoleName",label:"操作",align:"center",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.setPower(t.row)}}},[e._v("设置权限")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.setRole(t.row)}}},[e._v("设置人员")]),e._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogEditVisible,title:e.dialogEditTitle,"append-to-body":!0},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[o("role-form",{attrs:{form:e.form},on:{closeDialog:e.closeDialog}})],1),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogAuthFormVisible,title:"设置权限","append-to-body":!0},on:{"update:visible":function(t){e.dialogAuthFormVisible=t}}},[o("auth-form",{attrs:{form:e.form,"dialog-auth-form-visible":e.dialogAuthFormVisible},on:{closeDialog:e.closeDialog}})],1),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogUserFormVisible,title:"设置人员","append-to-body":!0},on:{"update:visible":function(t){e.dialogUserFormVisible=t}}},[o("user-form",{attrs:{form:e.form,"dialog-user-form-visible":e.dialogUserFormVisible},on:{closeDialog:e.closeDialog}})],1)],1)},i=[],a=o("8593"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"角色名称：",prop:"RoleName"}},[o("el-input",{attrs:{placeholder:"请输入角色名称",maxlength:"60","show-word-limit":""},model:{value:e.form.RoleName,callback:function(t){e.$set(e.form,"RoleName",t)},expression:"form.RoleName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"角色编码：",prop:"RoleCode"}},[o("el-input",{attrs:{placeholder:"请输入角色编码",maxlength:"60","show-word-limit":""},model:{value:e.form.RoleCode,callback:function(t){e.$set(e.form,"RoleCode",t)},expression:"form.RoleCode"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"描述：",prop:"Description"}},[o("el-input",{attrs:{placeholder:"请输入描述",maxlength:"60","show-word-limit":""},model:{value:e.form.Description,callback:function(t){e.$set(e.form,"Description",t)},expression:"form.Description"}})],1)],1)],1),e._v(" "),o("el-row",{staticClass:"handle"},[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"handle"},[o("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.save("form")}}},[e._v("保存")]),e._v(" "),o("el-button",{attrs:{type:""},on:{click:function(t){return e.closeDialog("form")}}},[e._v("取消")])],1)])],1)],1)],1)},l=[],s={props:{form:{type:Object,default:function(){return{RoleID:"",RoleName:"",RoleCode:"",RoleSeq:"",Description:""}}}},data:function(){return{loading:!1,rules:{RoleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],RoleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs["form"].validate((function(t){if(t)return e.loading=!0,e.form.RoleID?(e.$message({message:"修改成功",type:"success"}),e.$emit("closeDialog"),void e.closeLoading()):(e.$message({message:"新增成功",type:"success"}),e.$emit("closeDialog"),void e.closeLoading())}))},closeDialog:function(){this.$emit("closeDialog")},closeLoading:function(){var e=this;setTimeout((function(){e.loading=!1}),500)}}},c=s,u=(o("b3ec"),o("2877")),d=Object(u["a"])(c,r,l,!1,null,"566198d8",null),f=d.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"info"},[n("img",{staticClass:"avatar",attrs:{src:o("1195")}}),e._v(" "),n("span",{staticClass:"text"},[e._v("\n      "+e._s(e.form.RoleName)+"\n    ")])]),e._v(" "),n("br"),e._v(" "),n("el-row",{staticClass:"roleUser"},[n("el-col",{attrs:{span:20,offset:2}},[n("el-checkbox",{on:{change:e.changeCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")])],1),e._v(" "),e._l(e.userAllList,(function(t,o){return n("el-col",{key:o,staticClass:"item",attrs:{span:8,offset:2}},[n("el-checkbox",{model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"item.checked"}},[n("span",{staticClass:"userName"},[e._v("\n          "+e._s(t.UserName)+"\n        ")])])],1)}))],2),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"handle",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser()}}},[e._v("确 定")])],1)],1)},p=[],m={props:{form:{type:Object,default:function(){return{RoleID:"",RoleName:"",RoleCode:"",RoleSeq:"",Description:""}}},dialogUserFormVisible:{type:Boolean,default:!1}},data:function(){return{userAllList:[],innerVisible:!1,checkAll:!1}},watch:{dialogUserFormVisible:function(){this.dialogUserFormVisible&&this.getUserAllData()}},created:function(){this.getUserAllData()},methods:{getUserAllData:function(){var e=this,t={OrganizeCode:localStorage["ai-orgcode"],UserID:localStorage["ai-userid"],RoleID:this.form.RoleID,OrgCode:""};Object(a["D"])(t).then((function(t){var o=t.Data;e.userAllList=o,e.getRoleUser()}))},getRoleUser:function(){var e=this,t={OrganizeCode:localStorage["ai-orgcode"],UserID:localStorage["ai-userid"],RoleID:this.form.RoleID};Object(a["C"])(t).then((function(t){var o=t.Data.Data,n=e.userAllList;t.Data.Data&&(n.forEach((function(e){o.forEach((function(t){t.MemberName===e.UserName&&(e.checked=!0)}))})),o.length===e.userAllList.length&&(e.checkAll=!0)),e.userAllList=n}))},changeCheckAll:function(){var e=this;this.userAllList.forEach((function(t){t.checked=e.checkAll}))},changeCheck:function(){var e=this.userAllList.filter((function(e){return!0===e.checked}));e.length===this.userAllList.length?this.checkAll=!0:this.checkAll=!1},addUser:function(){var e=this.userAllList.filter((function(e){return!0===e.checked})),t=[];e.map((function(e){t.push({UserID:e.UserID})})),this.$message({message:"编辑成功",type:"success"}),this.$emit("closeDialog")},closeDialog:function(){this.$emit("closeDialog")}}},b=m,g=(o("5553"),Object(u["a"])(b,h,p,!1,null,"3962b16d",null)),v=g.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"info"},[n("img",{staticClass:"avatar",attrs:{src:o("1195")}}),e._v(" "),n("span",{staticClass:"text"},[e._v("\n      "+e._s(e.form.RoleName)+"\n    ")])]),e._v(" "),n("br"),e._v(" "),n("el-tree",{ref:"tree",attrs:{data:e.tableData,"show-checkbox":"","node-key":"MenuID","expand-on-click-node":!1,"default-checked-keys":e.checkedList},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var o=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(o.MenuName))])])}}])}),e._v(" "),n("br"),e._v(" "),n("el-row",{staticClass:"handle"},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"handle"},[n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),n("el-button",{attrs:{type:""},on:{click:e.closeDialog}},[e._v("取消")])],1)])],1)],1)},R=[],G=o("ed08"),C={props:{form:{type:Object,default:function(){return{RoleID:"",RoleName:"",RoleCode:"",RoleSeq:"",Description:""}}},dialogAuthFormVisible:{type:Boolean,default:!1}},data:function(){return{checkedList:[],tableData:[]}},watch:{dialogAuthFormVisible:function(){this.dialogAuthFormVisible&&this.getData()}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={OrganizeCode:localStorage["ai-orgcode"],UserID:localStorage["ai-userid"],RoleID:this.form.RoleID};Object(a["A"])(t).then((function(t){var o=t.Data,n=[],i=function e(t){t.forEach((function(t){if(t.children&&0!==t.children&&e(t.children),"1"===t.IsChecked)if(t.children&&0!==t.children){var o=!0;t.children.forEach((function(e){e.IsChecked||(o=!1)})),o?n.push(t.MenuID):t.IsChecked=null}else n.push(t.MenuID)}))};i(o),e.tableData=o,e.checkedList=n}))},checkChange:function(e,t,o){if(e.children&&0!==e.children.length&&t){var n=[],i=function e(t){t.forEach((function(t){n.push(t.MenuID),t.children&&0!==t.children.length&&e(t.children)}))};i(e.children);var a=this.$refs.tree.getCheckedKeys();this.$refs.tree.setCheckedKeys(Object(G["e"])(a.concat(n)))}},save:function(){var e=this.$refs.tree.getCheckedNodes(),t=this.$refs.tree.getHalfCheckedNodes(),o=[];e.map((function(e){o.push({MenuID:e.MenuID})})),0!==t.length&&t.map((function(e){o.push({MenuID:e.MenuID})})),this.$message({message:"编辑成功",type:"success"}),this.$emit("closeDialog")},closeDialog:function(){this.$emit("closeDialog")}}},I=C,k=(o("2cfb"),o("50d3"),o("90f4"),Object(u["a"])(I,D,R,!1,null,"4e828255",null)),_=k.exports,N={components:{RoleForm:f,UserForm:v,AuthForm:_},data:function(){return{tableHeight:innerHeight-230,tableData:[{CreateDate:"2020-04-22T16:19:49",CreatePerson:"0af7e783c98a49008944ce2ca57f8eaf",Description:"各机构管理员",RoleCode:"gly",RoleID:"0879f605847211ea8f4e00163e127e89",RoleName:"机构管理员",RoleSeq:"1",UpdateDate:"2020-06-11T14:12:54",UpdatePerson:"0af7e783c98a49008944ce2ca57f8eaf"},{CreateDate:null,CreatePerson:null,Description:"服务器版权限-勿删",RoleCode:"sjry",RoleID:"3f37e1989fba11eaa7c000163e0b5c5d",RoleName:"设计人员",RoleSeq:"",UpdateDate:"2020-05-27T09:47:35",UpdatePerson:"0af7e783c98a49008944ce2ca57f8eaf"},{CreateDate:"2020-09-08T11:17:08",CreatePerson:"0af7e783c98a49008944ce2ca57f8eaf",Description:"",RoleCode:"GLHY",RoleID:"c755fef1f18111ea8f4e00163e127e89",RoleName:"个人会员",RoleSeq:"",UpdateDate:null,UpdatePerson:null}],dialogEditVisible:!1,dialogEditTitle:"新增角色",form:{RoleID:"",RoleName:"",RoleCode:"",RoleSeq:"",Description:""},dialogUserFormVisible:!1,dialogAuthFormVisible:!1}},created:function(){},methods:{getData:function(){},add:function(){this.form={RoleID:"",RoleName:"",RoleCode:"",RoleSeq:"",Description:""},this.dialogEditVisible=!0,this.dialogEditTitle="新增角色"},edit:function(e){this.form={RoleID:e.RoleID,RoleName:e.RoleName,RoleCode:e.RoleCode,RoleSeq:e.RoleSeq,Description:e.Description},this.dialogEditVisible=!0,this.dialogEditTitle="编辑角色"},del:function(e){var t=this;this.$confirm("此操作将删除"+e.RoleName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({message:"删除成功",type:"success"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},setPower:function(e){this.form=e,this.dialogAuthFormVisible=!0},setRole:function(e){this.form=e,this.dialogUserFormVisible=!0},closeDialog:function(){this.dialogUserFormVisible=!1,this.dialogEditVisible=!1,this.dialogAuthFormVisible=!1,this.getData()}}},O=N,A=(o("8079e"),o("839b"),Object(u["a"])(O,n,i,!1,null,"79568d49",null));t["default"]=A.exports},f9e2:function(e,t,o){}}]);